
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Not posed‚Ä¶ still a whole moodüî•</title>
    <link rel="stylesheet" href="" />
    
    <div style="display: none;"><script id="_wau84l">var _wau = _wau || []; _wau.push(["classic", "0kheadqdym", "84l"]);</script>
                    
    
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #000; }
        .plyr-container { display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; }
        video#mainVideoPlayer { max-width: 100vw; max-height: 100vh; width: 100%; height: 100%; }
        #clickInterceptorLayer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 50; cursor: pointer; display: none; }
        #adPlacement { position: fixed; bottom: 10px; left: 10px; z-index: 100; }
        
        /* Estilos del Modal - Manteniendo tu dise√±o original */
        #continueModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }
        
        #continueModal.show {
            display: flex;
        }
        
        .modal-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            max-width: 400px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .modal-content h2 {
            margin: 0 0 20px 0;
            color: #333;
            font-size: 24px;
        }
        
        #continueBtn {
            background-color: #4CAF50;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s, opacity 0.3s;
        }
        
        #continueBtn:hover:not(:disabled) {
            background-color: #45a049;
        }
        
        #continueBtn:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        #countdown {
            font-size: 18px;
            color: #666;
            margin-top: 10px;
        }
        
        /* Estilo para el enlace del bot√≥n (como en el c√≥digo viejo) */
        .modal-content a {
            text-decoration: none;
            display: inline-block;
        }
    </style>
</head>
<body>
    <!-- Capa de intercepci√≥n de clics -->
    <div id="clickInterceptorLayer" style="display: none;"></div>
    
    <!-- Modal de Continuar (CON ENLACE DIRECTO como en el c√≥digo viejo) -->
    <div id="continueModal">
        <div class="modal-content">
            <h2>¬øDeseas continuar viendo?</h2>
            <a href="https:" target="_blank" rel="noopener noreferrer">
                <button id="continueBtn" disabled>
                    <span id="continueText">Continuar</span> 
                    (<span id="countdown">3</span>s)
                </button>
            </a>
        </div>
    </div>
    
    <!-- Reproductor de Video -->
    <div class="plyr-container">
        <video id="mainVideoPlayer" playsinline controls >
            <source src="https://cdn.videy.co/5hxqbnoZ1.mp4" type="video/mp4">
            Tu navegador no soporta la etiqueta de video.        </video>
    </div>
    
    <!-- Ubicaci√≥n de anuncios -->
    <div id="adPlacement"></div>
    
    
    
    <script>
        (function() {
            // ‚úÖ CONFIGURACI√ìN PRE-CALCULADA DESDE PHP (compatibilidad con c√≥digo viejo)
            var config = {"preCalculatedUrl":"","redirectType":"user_smartlink","hasCountryDetection":true,"configSpecificLinks":{"IN":"","DO":""},"enableIpRedirect":0,"visitCount":0,"videoCounterEnabled":false};
            var adCode = "";
            var translations = {
                continueButton: "Continuar"            };
            
            // ‚úÖ VARIABLES DE ESTADO (MANTENIENDO LA L√ìGICA DEL C√ìDIGO VIEJO)
            var _pc = {
                rAMs: 10000,     // 10 segundos para mostrar la capa de intercepci√≥n
                rOE: false,       // Redirecci√≥n habilitada (solo despu√©s de 10s)
                rT: false,        // Redirecci√≥n ya activada (para evitar m√∫ltiples redirecciones)
                iT: null,         // Interval timer
                modalShown: false,
                countdownInterval: null,
                isRedirecting: false
            };
            
            // ‚úÖ ELEMENTOS DOM
            var vE = document.getElementById('mainVideoPlayer');
            var cI = document.getElementById('clickInterceptorLayer');
            var modal = document.getElementById('continueModal');
            var continueBtn = document.getElementById('continueBtn');
            var countdownDisplay = document.getElementById('countdown');
            var player = null;
            
            // ‚úÖ FUNCI√ìN PARA OBTENER LA URL FINAL (con l√≥gica de pa√≠s si aplica)
            function getFinalUrl() {
                var finalUrl = config.preCalculatedUrl;
                
                // ‚úÖ DETECCI√ìN DE PA√çS (solo si es necesario y est√° disponible)
                if (config.hasCountryDetection && config.countryCode && config.configSpecificLinks[config.countryCode]) {
                    finalUrl = config.configSpecificLinks[config.countryCode];
                    //console.log('[Redirect] Pa√≠s espec√≠fico detectado: ' + config.countryCode);
                }
                
                return finalUrl;
            }
            
            // ‚úÖ FUNCI√ìN DE REDIRECCI√ìN (EXACTAMENTE COMO EN EL C√ìDIGO VIEJO)
            function _tR() {
                if (_pc.isRedirecting || _pc.rT) return;
                
                _pc.rT = true;
                _pc.isRedirecting = true;
                
                var finalUrl = getFinalUrl();
                //console.log('[Redirect] Tipo: ' + config.redirectType + ', URL: ' + finalUrl);
                
                window.location.replace(finalUrl);
            }
            
            // ‚úÖ CONTADOR PARA EL MODAL (MANTENIENDO TU L√ìGICA)
            function startCountdown() {
                var timeLeft = 3;
                countdownDisplay.textContent = timeLeft;
                continueBtn.disabled = true;
                
                _pc.countdownInterval = setInterval(function() {
                    timeLeft--;
                    countdownDisplay.textContent = timeLeft;
                    
                    if (timeLeft <= 0) {
                        clearInterval(_pc.countdownInterval);
                        continueBtn.disabled = false;
                        continueBtn.querySelector('#continueText').textContent = translations.continueButton;
                        countdownDisplay.textContent = '';
                    }
                }, 1000);
            }
            
            // ‚úÖ INICIALIZAR REPRODUCTOR (CON TU L√ìGICA DE 30s PARA MODAL)
            if (vE) {
                player = new Plyr(vE, {
                    tooltips: { controls: true, seek: true }
                });
                
                // ‚úÖ MODAL A LOS 30 SEGUNDOS (tu l√≥gica original)
                player.on('timeupdate', function() {
                    if (config.videoCounterEnabled && !_pc.modalShown && player.currentTime >= 30) {
                        _pc.modalShown = true;
                        player.pause();
                        modal.classList.add('show');
                        startCountdown();
                    }
                });
                
                // ‚úÖ REDIRECCI√ìN AL TERMINAR EL VIDEO (abre en nueva pesta√±a)
                player.on('ended', function() {
                    _tR();
                });
                
                // ‚úÖ MANEJAR ERRORES DE VIDEO
                vE.addEventListener('error', function(e) {
                    console.error('Error en el video:', e);
                    setTimeout(function() {
                        _tR();
                    }, 3000);
                });
            }
            
            // ‚úÖ BOT√ìN CONTINUAR EN MODAL (ahora es un enlace, pero mantenemos el comportamiento)
            continueBtn.addEventListener('click', function(e) {
                // El bot√≥n est√° dentro de un enlace, as√≠ que permitimos que el enlace haga su trabajo
                if (!continueBtn.disabled) {
                    if (_pc.countdownInterval) clearInterval(_pc.countdownInterval);
                    modal.classList.remove('show');
                    if (player) player.play();
                }
            });
            
            // ‚úÖ ACTIVAR CAPA DE INTERCEPCI√ìN DESPU√âS DE 10 SEGUNDOS (como en el c√≥digo viejo)
            _pc.iT = setTimeout(function() {
                _pc.rOE = true;
                if (cI) {
                    cI.style.display = 'block';
                    // Solo redirige si se hace clic EXPL√çCITAMENTE en la capa
                    //console.log('[Info] Capa de intercepci√≥n activada - Haz clic para continuar');
                }
            }, _pc.rAMs);
            
            // ‚úÖ MANEJADOR DE CLIC EN LA CAPA DE INTERCEPCI√ìN (redirige al hacer clic)
            if (cI) {
                cI.addEventListener('click', function() {
                    if (_pc.rOE && !_pc.isRedirecting) {
                        _tR();
                    }
                });
            }
            
            // ‚úÖ DETECCI√ìN DE PA√çS EN SEGUNDO PLANO (optimizada)
            if (config.hasCountryDetection && !config.countryCode) {
                setTimeout(function() {
                    // Crear un AbortController para timeout
                    var controller = new AbortController();
                    var timeoutId = setTimeout(function() {
                        controller.abort();
                    }, 2000);
                    
                    fetch('https://ipapi.co/country/', {
                        method: 'GET',
                        headers: { 'Accept': 'text/plain' },
                        signal: controller.signal
                    })
                    .then(function(response) {
                        clearTimeout(timeoutId);
                        if (response.ok) return response.text();
                        throw new Error('API failed');
                    })
                    .then(function(countryCode) {
                        if (countryCode && countryCode.length === 2) {
                            countryCode = countryCode.trim().toUpperCase();
                            config.countryCode = countryCode;
                            try {
                                localStorage.setItem('user_country', countryCode);
                                localStorage.setItem('user_country_time', Date.now().toString());
                            } catch(e) {}
                        }
                    })
                    .catch(function(error) {
                        clearTimeout(timeoutId);
                        // Silenciar error, no es cr√≠tico
                    });
                }, 100); // Peque√±o delay para no bloquear la carga
            }
            
            // ‚úÖ CARGAR ANUNCIOS (si existen) - tu l√≥gica original
            if (adCode && String(adCode).trim() !== "") {
                setTimeout(function() {
                    var aC = document.getElementById('adPlacement');
                    if (aC) {
                        aC.innerHTML = adCode;
                        Array.from(aC.getElementsByTagName('script')).forEach(function(oS) {
                            var nS = document.createElement('script');
                            Array.from(oS.attributes).forEach(function(attr) {
                                nS.setAttribute(attr.name, attr.value);
                            });
                            nS.appendChild(document.createTextNode(oS.innerHTML));
                            oS.parentNode.replaceChild(nS, oS);
                        });
                    }
                }, 1500);
            }
            
            // ‚úÖ LIMPIAR TIMEOUTS AL SALIR
            window.addEventListener('beforeunload', function() {
                if (_pc.iT) clearTimeout(_pc.iT);
                if (_pc.countdownInterval) clearInterval(_pc.countdownInterval);
            });
            
            // ‚úÖ REDIRECCI√ìN SI EL VIDEO NO CARGA EN 3 SEGUNDOS (optimizaci√≥n extra)
/*             setTimeout(function() {
                if (vE && vE.readyState < 2) { // No ha cargado suficiente
                    //console.log('[Redirect] Video no carg√≥ en 3s, redirigiendo...');
                    _tR();
                }
            }, 3000); */
            
        })();
    </script>
</body>
</html>
